<html>
<div id="chartContainer">

    <!--<div id="option">
        <input id="updateButton"
               type="button"
               value="Pause"
               onclick="updateData()" />
    </div>-->

    <h1>Dataset: Loan Data from Prosper</h1>

    <h3>At higher rates of bankcard utilization,
        borrowers tend to default</h3>

    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script src="http://dimplejs.org/dist/dimple.v2.0.0.min.js"></script>
    <script type="text/javascript">
        var svg = dimple.newSvg("#chartContainer", 1024, 500);
        var updateClick = true;
        var story
        // there are no changes to original plot data, used directly output from ggplot_build() and assigned correctly
        // bad/good statuses. See updated RMD file from P4 provided with the project.
        d3.csv("out-p1.csv", function (data) {
            var myChart = new dimple.chart(svg, data);
            // myChart.setBounds(60, 30, 505, 305);
            var x = myChart.addCategoryAxis("x", "BankcardUtilization");
            x.addOrderRule("BankcardUtilization");
            var y = myChart.addMeasureAxis("y", "Frequency");
            myChart.addSeries("LoanStatusGroup", dimple.plot.line);
            // myChart.addSeries("LoanStatusGroup", dimple.plot.bubble);
            myChart.addLegend(60, 10, 900, 20, "right");
            x.title = "Bankcard Utilization";
            y.title = "Frequency of Good/Bad borrowers with bankcard utilization";

            // var frame = 5000;
            // var story = myChart.setStoryboard("year");
            // story.frameDuration = frame;
            // story.addOrderRule("Date");
            myChart.draw();
            //.style("font-weight", "bold")
            /*
            svg.append("text")
                    .attr("x", 300)
                    .attr("y", 20)
                    .attr("text-anchor", "middle")
                    .style("font-size", "16px")
                    .style("font-family", "Sans-serif")
                    .text("At higher rates of bankcard utilization, borrowers tend to default");

            // On click of the side chart

            function onClick(e) {
                // Pause the animation
                story.pauseAnimation();
                // If it is already selected resume the animation
                // otherwise pause and move to the selected month
                if (e.yValue === story.getFrameValue()) {
                    story.startAnimation();
                } else {
                    story.goToFrame(e.yValue);
                    story.pauseAnimation();
                }
            }
             */
        });

    </script>

    <!-- HTML generated using hilite.me -->
    <div style="background: #ffffff; overflow:auto;width:1024;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
    <pre style="margin: 0; line-height: 125%">
    <b>Bad</b>: Past Due, Defaulted, Chargedoff
    <!--  -->
    <b>Good</b>: FinalPayment, Completed
    </pre>
    </div>
    <!-- <b>Neutral</b>: Cancelled, Current -->
    </div>
    <pre style="background: #ffffff; overflow:auto;width:1028;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
     ggplot(aes(x <span style="color:#859900">=</span> <span style="color:#268bd2">BankcardUtilization</span>, y <span style="color:#859900">=</span> ..<span style="color:#268bd2">density</span>..),
           data <span style="color:#859900">=</span> <span style="color:#268bd2">xdata.sub</span>, binwidth=<span style="color:#d33682">50</span>) <span style="color:#859900">+</span>
      geom_freqpoly(aes(color <span style="color:#859900">=</span> <span style="color:#268bd2">LoanStatusGroup</span>), binwidth <span style="color:#859900">=</span> <span style="color:#d33682">0.05</span>) <span style="color:#859900">+</span>
      scale_x_continuous(breaks <span style="color:#859900">=</span> seq(<span style="color:#d33682">0.2</span>, <span style="color:#d33682">1.3</span>, <span style="color:#d33682">0.1</span>), limits <span style="color:#859900">=</span> c(<span style="color:#d33682">0.2</span>, <span style="color:#d33682">1.3</span>)) <span style="color:#859900">+</span>
      scale_y_continuous(breaks <span style="color:#859900">=</span> seq(<span style="color:#d33682">0</span>, <span style="color:#d33682">2.5</span>, <span style="color:#d33682">0.2</span>), limits <span style="color:#859900">=</span> c(<span style="color:#d33682">0</span>, <span style="color:#d33682">2.5</span>)) <span style="color:#859900">+</span>
      scale_color_brewer(palette <span style="color:#859900">=</span> <span style="color:#269186"><span style="color:#c60000">'</span>Set1<span style="color:#c60000">'</span></span>) <span style="color:#859900">+</span>
      xlab(<span style="color:#269186"><span style="color:#c60000">'</span>Bankcard Utilization<span style="color:#c60000">'</span></span>) <span style="color:#859900">+</span>
      ylab(<span style="color:#269186"><span style="color:#c60000">'</span>Frequency of Good/Bad borrowers with bankcard utilization<span style="color:#c60000">'</span></span>) <span style="color:#859900">+</span>
      ggtitle(<span style="color:#269186"><span style="color:#c60000">'</span>At higher rates of bankcard utilization,
              borrowers tend to default<span style="color:#c60000">'</span></span>)
    </pre>
</html>